include ../../../../common/src/components/modal/modal

mixin infoMinimal(data)
  - var data = data || {}
  - var gazPar = data.gazPar || false
  - var erreur = data.erreur || false
  - var sousTitre = data.sousTitre || false
  - var firstYear = data.firstYear || false
  - var percent = data.percent || false
  - var percentGazpar = data.percentGazpar || false
  - var disabled = data.disabled || false
  - var tablette = data.tablette || false
  - var gazParSousTitle = data.gazParSousTitle || false
  

  //.c-infoMinimal
  .c-infoMinimal(class=gazPar? "c-infoMinimal--gazPar":"" class=erreur? "c-infoMinimal--erreur":"")&attributes(attributes)
    .c-infoMinimal__bg
      if !gazPar
        .c-infoMinimal__headTitle
          h2.c-infoMinimal__title 
            span Je consulte le cumul de ma consommation
            span.c-infoMinimal__icon.icon.icon-question-circleDS(data-e-modal-open="infoMinimal" type="button")
          if sousTitre
            span.c-infoMinimal__soustitre Dernière mise à jour : 30 février 2022

          +modal({
            target: '{"target": "infoMinimal"}'
          })

        .c-infoMinimal__head
          .c-infoMinimal__headInfoMenu
            button(type="button").c-infoMinimal__btn.is-active
              span À ce jour
            button(type="button" aria-disabled="true" class=disabled ? "is-disabled" : "").c-infoMinimal__btn
              span Prévision fin 2022
          button(type="button").c-infoMinimal__btn.is-active
            span kWh
          button(type="button").c-infoMinimal__btn 
            span m<sup>3</sup>
          button(type="button").c-infoMinimal__btn 
            span euros
        .c-infoMinimal__main
          .c-infoMinimal__mainStat
            if !firstYear
              .c-infoMinimal__stat
                .c-infoMinimal__statContent
                  if !erreur
                    span.c-infoMinimal__number 
                      span 15 500
                      span.c-infoMinimal__numberKwh kWh
                    span.c-infoMinimal__desc depuis le début de l’année 2021
                  else 
                    span.c-infoMinimal__number - kWh
              .c-infoMinimal__stat
                .c-infoMinimal__statContent
                  if !erreur
                    if !percent
                      span.c-infoMinimal__number 
                        span 185
                        span.c-infoMinimal__numberKwh kWh
                      span.c-infoMinimal__desc depuis le début de mois
                    else 
                      span.c-infoMinimal__number 
                        span + 6<small>%</small>
                      span.c-infoMinimal__desc par rapport à 2021 (19 867 kWh)
                  else 
                    span.c-infoMinimal__number - kWh
            else
              p.c-infoMinimal__firstYear Vos données de consommation seront disponibles prochainement.
        .c-infoMinimal__allConso
          .c-infoMinimal__allConsoDesc
            if !erreur
              //- .icon.icon-flameGaz
              //- span Votre consommation 2020
              //- span.c-infoMinimal__allConsoNumber 23530 kWh
              if !percent
                span Prochaine télérelève : <b> 2 février 2020 </b>
              else
                p  Sur cette tendance, nous estimons que vous consommerez
                span.u-textBold +6% par rapport à 2021
            else
              //.icon.icon-error-cercle-modal
              if !percent
                span Vos données sont actuellement indisponibles
              else
                p  Sur cette tendance, nous estimons que vous consommerez
                span.u-textBold +6% par rapport à 2021

      else
        .c-infoMinimal__mainGazPar(class=percentGazpar ? "c-infoMinimal__mainGazParbkg" : "")
          .c-infoMinimal__headTitle
            h2.c-infoMinimal__title 
              span Je consulte le cumul de ma consommation 
              span.c-infoMinimal__icon.icon.icon-question-circleDS(data-e-modal-open="infoMinimal" type="button")

              +modal({
                target: '{"target": "infoMinimal"}'
              })
            if gazParSousTitle
              span.c-infoMinimal__soustitre Dernière mise à jour : 30 février 2022

          .c-infoMinimal__head
            .c-infoMinimal__headInfoMenu
              button(type="button").c-infoMinimal__btn.is-active
                span À ce jour
              button(type="button").c-infoMinimal__btn 
                span Prévision fin 2022
            button(type="button").c-infoMinimal__btn.is-active
              span kWh
            button(type="button").c-infoMinimal__btn 
              span m<sup>3</sup>
            button(type="button").c-infoMinimal__btn 
              span euros
          .c-infoMinimal__main
            .c-infoMinimal__mainStat
              if !firstYear
                .c-infoMinimal__stat
                    .c-infoMinimal__statContent
                      if !erreur
                        if !percent
                          span.c-infoMinimal__number 
                            span 0  
                            span.c-infoMinimal__numberKwh kWh
                          span.c-infoMinimal__desc depuis le début de l’année 2021
                          //span.c-infoMinimal__descTow prochaine relève le 1er février 2021
                        else
                          span.c-infoMinimal__number 
                            span + 6<small>%</small>
                          span.c-infoMinimal__desc par rapport à 2021 (19 867 kWh)
                      else
                        span.c-infoMinimal__number - kWh
                if tablette 
                  .c-infoMinimal__stat
                    .c-infoMinimal__statContent
                      span.c-infoMinimal__number 
                        span + 6<small>%</small>
                      span.c-infoMinimal__desc par rapport à 2021 (19 867 kWh)
              else
                .c-infoMinimal__statFirstYear
                  p.c-infoMinimal__firstYear--info.u-margin-b-20 Il est encore trop tôt pour obtenir votre estimation.
                  p.c-infoMinimal__firstYear Actuellement votre relevé est mensuel.
                  a(href="" alt="").c-infoMinimal__firstYearLink J’active mon relevé journalier
            .c-infoMinimal__allConso
              .c-infoMinimal__allConsoDesc
                if !erreur
                  //- .icon.icon-flameGaz
                  //- span Votre consommation 2020
                  //- span.c-infoMinimal__allConsoNumber 23530 kWh
                  if !percent
                    span Prochaine télérelève : <b> 2 février 2020 </b>
                  else
                    p  Sur cette tendance, nous estimons que vous consommerez
                    span.u-textBold +6% par rapport à 2021
                else
                  //.icon.icon-error-cercle-modal
                  span Vos données sont actuellement indisponibles
        .c-infoMinimal__pushGazPar
          if !tablette
            p.c-infoMinimal__pushGazParPara Envie de suivre le cumul de votre consommation au jour le jour ?
            p Votre compteur gazpar vous permet de le faire <b> gratuitement et simplement.</b>
          else 
            .c-infoinfoMinimal__btnTabletteGazPar
              p.c-infoMinimal__pushGazParPara Envie de suivre le cumul de votre consommation au jour le jour ?
              p Votre compteur gazpar vous permet de le faire <b> gratuitement et simplement.</b>
          +btnWrapper().c-infoMinimal__pushGazParBtn
            if !erreur
              +baseBtn({
                text: "J'active",
                button: true
              })(type="button")
            else
              +baseBtn({
                text: "J'active",
                button: true
              })(type="button" disabled).is-disabled