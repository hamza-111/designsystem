//----------------------
//- DO NOT EDIT
extends pug-partials/base
//----------------------


//- Main variables
block variables
  - var title = "simulateur étiquettes énergétiques"
  - var page = ""
  - var bodyClass = ""
  - var description = ""
  - var wrapperSite = "l-wrapper--siteFull"



//- JS only for that page
block JS


//- Page content
block content
  .l-wrapper--medium
    div(style="display: none;")
      input(type="hidden" id="usermail" value="emmanuel.pignot@engie.com")
      input(type="hidden" id="serviceprovenance" value="dmpa")

    #simulateur-ece-cst-container

    script.
      function afficherSimulateur(){
        var urlSimulateur = 'https://int-simulateur-ece-cst.tbscg.com/';
        var loadSimulateur = function() {
          $(function(){
            var successCB = function(data){
              $('#simulateur-ece-cst-container').html(data);
            };
            var errorCB = function(error){
              console.log('error');
            }
            $.ajax({
              url: urlSimulateur,
              dataType: 'html',
              crossDomain: true,
              data: { url : urlSimulateur },
              success: successCB,
              error: errorCB
            });
          });
        }

        var loadPluginIfIE9 = function() {
          function isIE () {
            var myNav = navigator.userAgent.toLowerCase();
            return (myNav.indexOf('msie') != -1) ? parseInt(myNav.split('msie')[1]) : false;
          }
          if (isIE () && isIE () <= 9) {
          var scriptPlugin=document.createElement("script");
            scriptPlugin.type="text/javascript";
            scriptPlugin.src= urlSimulateur +'assets/js/jquery.xdomainrequest.min.js';
            document.body.appendChild(scriptPlugin);
            scriptPlugin.onload = loadSimulateur;
          } else {
            loadSimulateur();
          }
        }

        if (document.getElementById('simulateur-ece-cst-container')) {
          if(typeof jQuery  == 'undefined') {
            var script = document.createElement("script");
            script.type = "text/javascript";
            script.src = urlSimulateur +'assets/js/jquery.js';
            document.body.appendChild(script);
            script.onload = loadPluginIfIE9;
          } else {
            loadPluginIfIE9();
          }
        }
      }
      afficherSimulateur();
